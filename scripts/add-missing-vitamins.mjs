#!/usr/bin/env node

/**
 * ä¸è¶³ã—ã¦ã„ã‚‹ãƒ“ã‚¿ãƒŸãƒ³ãƒ»ãƒŸãƒãƒ©ãƒ«æˆåˆ†ã‚’Sanityã«è¿½åŠ ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
 *
 * è¿½åŠ æˆåˆ†:
 * - ãƒ“ã‚¿ãƒŸãƒ³B1ï¼ˆãƒã‚¢ãƒŸãƒ³ï¼‰
 * - ãƒ“ã‚¿ãƒŸãƒ³B2ï¼ˆãƒªãƒœãƒ•ãƒ©ãƒ“ãƒ³ï¼‰
 * - ãƒ‘ãƒ³ãƒˆãƒ†ãƒ³é…¸ï¼ˆãƒ“ã‚¿ãƒŸãƒ³B5ï¼‰
 * - éŠ…
 */

import { createClient } from '@sanity/client';
import dotenv from 'dotenv';
import { fileURLToPath } from 'url';
import { dirname, join } from 'path';

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

// apps/web/.env.local ã‹ã‚‰ç’°å¢ƒå¤‰æ•°ã‚’èª­ã¿è¾¼ã¿
dotenv.config({ path: join(__dirname, '../apps/web/.env.local') });

const client = createClient({
  projectId: process.env.NEXT_PUBLIC_SANITY_PROJECT_ID,
  dataset: process.env.NEXT_PUBLIC_SANITY_DATASET || 'production',
  token: process.env.SANITY_API_TOKEN,
  apiVersion: '2024-01-01',
  useCdn: false,
});

const missingIngredients = [
  {
    _id: 'ingredient-vitamin-b1',
    _type: 'ingredient',
    name: 'ãƒ“ã‚¿ãƒŸãƒ³B1ï¼ˆãƒã‚¢ãƒŸãƒ³ï¼‰',
    nameEn: 'Vitamin B1 (Thiamine)',
    category: 'ãƒ“ã‚¿ãƒŸãƒ³',
    description: 'ãƒ“ã‚¿ãƒŸãƒ³B1ï¼ˆãƒã‚¢ãƒŸãƒ³ï¼‰ã¯ã€ç³–è³ªã‹ã‚‰ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ç”£ç”Ÿã™ã‚‹ãŸã‚ã«å¿…è¦ãªæ°´æº¶æ€§ãƒ“ã‚¿ãƒŸãƒ³ã§ã™ã€‚ç¥çµŒç³»ã®æ­£å¸¸ãªæ©Ÿèƒ½ç¶­æŒã«ã‚‚é‡è¦ãªå½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚',
    evidenceLevel: 'A',
    benefits: [
      'ç³–è³ªä»£è¬ã‚’åŠ©ã‘ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ç”£ç”Ÿã‚’ã‚µãƒãƒ¼ãƒˆ',
      'ç¥çµŒç³»ã®æ­£å¸¸ãªæ©Ÿèƒ½ã‚’ç¶­æŒ',
      'ç–²åŠ´å›å¾©ã«å½¹ç«‹ã¤',
      'è„³ã®æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆ',
    ],
    recommendedDosage: 'æˆäººç”·æ€§: 1.4mg/æ—¥ã€æˆäººå¥³æ€§: 1.1mg/æ—¥ï¼ˆåšç”ŸåŠ´åƒçœã€Œæ—¥æœ¬äººã®é£Ÿäº‹æ‘‚å–åŸºæº–ã€2020å¹´ç‰ˆã‚ˆã‚Šï¼‰',
    sideEffects: 'é€šå¸¸ã®é£Ÿäº‹ã‚„ã‚µãƒ—ãƒªãƒ¡ãƒ³ãƒˆã‹ã‚‰ã®æ‘‚å–ã§ã¯å‰¯ä½œç”¨ã¯ã»ã¨ã‚“ã©å ±å‘Šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚éå‰°æ‘‚å–ã®å¿ƒé…ã¯å°‘ãªã„æ°´æº¶æ€§ãƒ“ã‚¿ãƒŸãƒ³ã§ã™ã€‚',
  },
  {
    _id: 'ingredient-vitamin-b2',
    _type: 'ingredient',
    name: 'ãƒ“ã‚¿ãƒŸãƒ³B2ï¼ˆãƒªãƒœãƒ•ãƒ©ãƒ“ãƒ³ï¼‰',
    nameEn: 'Vitamin B2 (Riboflavin)',
    category: 'ãƒ“ã‚¿ãƒŸãƒ³',
    description: 'ãƒ“ã‚¿ãƒŸãƒ³B2ï¼ˆãƒªãƒœãƒ•ãƒ©ãƒ“ãƒ³ï¼‰ã¯ã€è„‚è³ªã€ç³–è³ªã€ã‚¿ãƒ³ãƒ‘ã‚¯è³ªã®ä»£è¬ã«é–¢ä¸ã™ã‚‹æ°´æº¶æ€§ãƒ“ã‚¿ãƒŸãƒ³ã§ã™ã€‚çš®è†šã‚„ç²˜è†œã®å¥åº·ç¶­æŒã«é‡è¦ãªå½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚',
    evidenceLevel: 'A',
    benefits: [
      'è„‚è³ªãƒ»ç³–è³ªãƒ»ã‚¿ãƒ³ãƒ‘ã‚¯è³ªã®ä»£è¬ã‚’ã‚µãƒãƒ¼ãƒˆ',
      'çš®è†šã‚„ç²˜è†œã®å¥åº·ç¶­æŒ',
      'ç›®ã®å¥åº·ã‚’ã‚µãƒãƒ¼ãƒˆ',
      'æˆé•·ä¿ƒé€²ã«å½¹ç«‹ã¤',
      'æŠ—é…¸åŒ–ä½œç”¨',
    ],
    recommendedDosage: 'æˆäººç”·æ€§: 1.6mg/æ—¥ã€æˆäººå¥³æ€§: 1.2mg/æ—¥ï¼ˆåšç”ŸåŠ´åƒçœã€Œæ—¥æœ¬äººã®é£Ÿäº‹æ‘‚å–åŸºæº–ã€2020å¹´ç‰ˆã‚ˆã‚Šï¼‰',
    sideEffects: 'é€šå¸¸ã®é£Ÿäº‹ã‚„ã‚µãƒ—ãƒªãƒ¡ãƒ³ãƒˆã‹ã‚‰ã®æ‘‚å–ã§ã¯å‰¯ä½œç”¨ã¯ã»ã¨ã‚“ã©å ±å‘Šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚éå‰°æ‘‚å–ã™ã‚‹ã¨å°¿ãŒé»„è‰²ããªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ãŒã€ç„¡å®³ã§ã™ã€‚',
  },
  {
    _id: 'ingredient-pantothenic-acid',
    _type: 'ingredient',
    name: 'ãƒ‘ãƒ³ãƒˆãƒ†ãƒ³é…¸ï¼ˆãƒ“ã‚¿ãƒŸãƒ³B5ï¼‰',
    nameEn: 'Pantothenic Acid (Vitamin B5)',
    category: 'ãƒ“ã‚¿ãƒŸãƒ³',
    description: 'ãƒ‘ãƒ³ãƒˆãƒ†ãƒ³é…¸ï¼ˆãƒ“ã‚¿ãƒŸãƒ³B5ï¼‰ã¯ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ä»£è¬ã‚„è„‚è‚ªé…¸ãƒ»ã‚³ãƒ¬ã‚¹ãƒ†ãƒ­ãƒ¼ãƒ«ã®åˆæˆã«é–¢ä¸ã™ã‚‹æ°´æº¶æ€§ãƒ“ã‚¿ãƒŸãƒ³ã§ã™ã€‚å‰¯è…çš®è³ªãƒ›ãƒ«ãƒ¢ãƒ³ã®åˆæˆã«ã‚‚å¿…è¦ã§ã€ã‚¹ãƒˆãƒ¬ã‚¹å¯¾å¿œã«é‡è¦ãªå½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚',
    evidenceLevel: 'A',
    benefits: [
      'ã‚¨ãƒãƒ«ã‚®ãƒ¼ä»£è¬ã‚’ã‚µãƒãƒ¼ãƒˆ',
      'è„‚è‚ªé…¸ã®åˆæˆã«é–¢ä¸',
      'å‰¯è…çš®è³ªãƒ›ãƒ«ãƒ¢ãƒ³ã®åˆæˆã‚’åŠ©ã‘ã‚‹',
      'ã‚¹ãƒˆãƒ¬ã‚¹å¯¾å¿œåŠ›ã‚’ã‚µãƒãƒ¼ãƒˆ',
      'çš®è†šã‚„ç²˜è†œã®å¥åº·ç¶­æŒ',
    ],
    recommendedDosage: 'æˆäºº: 5-6mg/æ—¥ï¼ˆåšç”ŸåŠ´åƒçœã€Œæ—¥æœ¬äººã®é£Ÿäº‹æ‘‚å–åŸºæº–ã€2020å¹´ç‰ˆã‚ˆã‚Šï¼‰',
    sideEffects: 'é€šå¸¸ã®é£Ÿäº‹ã‚„ã‚µãƒ—ãƒªãƒ¡ãƒ³ãƒˆã‹ã‚‰ã®æ‘‚å–ã§ã¯å‰¯ä½œç”¨ã¯ã»ã¨ã‚“ã©å ±å‘Šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æ°´æº¶æ€§ãƒ“ã‚¿ãƒŸãƒ³ã®ãŸã‚éå‰°æ‘‚å–ã®å¿ƒé…ã¯å°‘ãªã„ã§ã™ã€‚',
  },
  {
    _id: 'ingredient-copper',
    _type: 'ingredient',
    name: 'éŠ…',
    nameEn: 'Copper',
    category: 'ãƒŸãƒãƒ©ãƒ«',
    description: 'éŠ…ã¯ã€é‰„ã®ä»£è¬ã‚„èµ¤è¡€çƒã®å½¢æˆã‚’åŠ©ã‘ã‚‹å¿…é ˆãƒŸãƒãƒ©ãƒ«ã§ã™ã€‚å¤šãã®é…µç´ ã®æ§‹æˆæˆåˆ†ã¨ã—ã¦ã€æŠ—é…¸åŒ–ä½œç”¨ã‚„éª¨ã®å½¢æˆã«ã‚‚é‡è¦ãªå½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚',
    evidenceLevel: 'A',
    benefits: [
      'èµ¤è¡€çƒã®å½¢æˆã‚’åŠ©ã‘ã‚‹',
      'éª¨ã®å½¢æˆã‚’ã‚µãƒãƒ¼ãƒˆ',
      'é‰„ã®ä»£è¬ã‚’åŠ©ã‘ã‚‹',
      'æŠ—é…¸åŒ–ä½œç”¨',
      'ã‚³ãƒ©ãƒ¼ã‚²ãƒ³ã‚„ã‚¨ãƒ©ã‚¹ãƒãƒ³ã®ç”Ÿæˆã«é–¢ä¸',
    ],
    recommendedDosage: 'æˆäºº: 0.8-0.9mg/æ—¥ï¼ˆåšç”ŸåŠ´åƒçœã€Œæ—¥æœ¬äººã®é£Ÿäº‹æ‘‚å–åŸºæº–ã€2020å¹´ç‰ˆã‚ˆã‚Šï¼‰',
    sideEffects: 'é€šå¸¸ã®é£Ÿäº‹ã‚„ã‚µãƒ—ãƒªãƒ¡ãƒ³ãƒˆã‹ã‚‰ã®é©åˆ‡ãªæ‘‚å–ã§ã¯å‰¯ä½œç”¨ã¯ã»ã¨ã‚“ã©ã‚ã‚Šã¾ã›ã‚“ã€‚éå‰°æ‘‚å–ï¼ˆæˆäºº: 10mg/æ—¥ä»¥ä¸Šï¼‰ã¯è‚éšœå®³ã‚„èƒƒè…¸éšœå®³ã‚’å¼•ãèµ·ã“ã™å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚',
  },
];

async function addMissingIngredients() {
  console.log('ğŸ”„ ä¸è¶³ã—ã¦ã„ã‚‹æˆåˆ†ã‚’Sanityã«è¿½åŠ ä¸­...\n');

  for (const ingredient of missingIngredients) {
    try {
      console.log(`ğŸ“ è¿½åŠ ä¸­: ${ingredient.name} (${ingredient.nameEn})`);

      const result = await client.createOrReplace(ingredient);

      console.log(`âœ… è¿½åŠ å®Œäº†: ${result._id}\n`);
    } catch (error) {
      console.error(`âŒ ã‚¨ãƒ©ãƒ¼: ${ingredient.name}ã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ`);
      console.error(error.message);
      console.error('');
    }
  }

  console.log('âœ¨ ã™ã¹ã¦ã®æˆåˆ†ã®è¿½åŠ ãŒå®Œäº†ã—ã¾ã—ãŸï¼');
}

addMissingIngredients().catch((error) => {
  console.error('âŒ ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œã‚¨ãƒ©ãƒ¼:', error);
  process.exit(1);
});
