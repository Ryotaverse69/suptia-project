# Compliance Checker

è–¬æ©Ÿæ³•ãƒ»æ™¯å“è¡¨ç¤ºæ³•ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ãƒã‚§ãƒƒã‚«ãƒ¼

## æ¦‚è¦

**compliance-checker** ã¯ã€Suptiaãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨˜äº‹ã€UIæ–‡è¨€ã€å•†å“èª¬æ˜ãŒè–¬æ©Ÿæ³•ï¼ˆåŒ»è–¬å“åŒ»ç™‚æ©Ÿå™¨ç­‰æ³•ï¼‰ãŠã‚ˆã³æ™¯å“è¡¨ç¤ºæ³•ã«æº–æ‹ ã—ã¦ã„ã‚‹ã‹ã‚’è‡ªå‹•çš„ã«ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

## ä¸»ãªæ©Ÿèƒ½

- âœ… **è–¬æ©Ÿæ³•ãƒã‚§ãƒƒã‚¯**: æ²»ç™‚åŠ¹æœã€äºˆé˜²åŠ¹æœã€ç–¾ç—…æ²»ç™‚ãªã©ã®ç¦æ­¢è¡¨ç¾ã‚’æ¤œå‡º
- âœ… **æ™¯å“è¡¨ç¤ºæ³•ãƒã‚§ãƒƒã‚¯**: æœ€ä¸Šç´šè¡¨ç¾ã€èª‡å¤§åºƒå‘Šã€æ ¹æ‹ ã®ãªã„æ–­å®šè¡¨ç¾ã‚’æ¤œå‡º
- âœ… **ãƒãƒ«ãƒãƒ•ã‚¡ã‚¤ãƒ«å¯¾å¿œ**: TSXã€TSã€JSONã€Markdownãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆ
- âœ… **ä¿®æ­£ææ¡ˆ**: å„é•åã«å¯¾ã—ã¦æ³•ä»¤æº–æ‹ ã®ä»£æ›¿è¡¨ç¾ã‚’ææ¡ˆ
- âœ… **è¤‡æ•°å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**: ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã€JSONã€Markdownã§ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
- âœ… **Globå¯¾å¿œ**: ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã§è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€æ‹¬ãƒã‚§ãƒƒã‚¯

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```bash
# TSXãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯
npx tsx .claude/skills/compliance-checker/index.ts --target "apps/web/src/**/*.tsx"

# JSONè¨˜äº‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯
npx tsx .claude/skills/compliance-checker/index.ts --target "*-article.json"

# ç‰¹å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ãƒã‚§ãƒƒã‚¯
npx tsx .claude/skills/compliance-checker/index.ts --target "apps/web/src/app/(marketing)/ingredients"
```

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³     | çŸ­ç¸®å½¢ | èª¬æ˜                                               | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ       |
| -------------- | ------ | -------------------------------------------------- | ---------------- |
| `--target`     | `-t`   | ãƒã‚§ãƒƒã‚¯å¯¾è±¡ã®ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆå¿…é ˆï¼‰        | -                |
| `--file-types` | `-f`   | ãƒã‚§ãƒƒã‚¯å¯¾è±¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰       | `tsx,ts,json,md` |
| `--severity`   | `-s`   | è¡¨ç¤ºã™ã‚‹é•åã®é‡è¦åº¦ï¼ˆ`critical`/`warning`/`all`ï¼‰ | `all`            |
| `--format`     | -      | å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆ`console`/`json`/`markdown`ï¼‰    | `console`        |
| `--save`       | `-o`   | ãƒ¬ãƒãƒ¼ãƒˆã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜                           | -                |
| `--exclude`    | `-e`   | é™¤å¤–ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰                       | -                |
| `--help`       | `-h`   | ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º                                       | -                |

### ä½¿ç”¨ä¾‹

#### 1. Criticalãªé•åã®ã¿ãƒã‚§ãƒƒã‚¯

```bash
npx tsx .claude/skills/compliance-checker/index.ts \
  --target "apps/web/src/**/*.tsx" \
  --severity critical
```

#### 2. Markdownãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ

```bash
npx tsx .claude/skills/compliance-checker/index.ts \
  --target "apps/web/src" \
  --format markdown \
  --save compliance-report.md
```

#### 3. ç‰¹å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é™¤å¤–

```bash
npx tsx .claude/skills/compliance-checker/index.ts \
  --target "**/*.tsx" \
  --exclude "**/__tests__/**,**/stories/**"
```

#### 4. JSONå½¢å¼ã§å‡ºåŠ›ï¼ˆCI/CDé€£æºï¼‰

```bash
npx tsx .claude/skills/compliance-checker/index.ts \
  --target "*-article.json" \
  --format json \
  --save compliance-result.json
```

## æ¤œå‡ºã•ã‚Œã‚‹é•å

### Criticalï¼ˆé‡å¤§é•åï¼‰

| ã‚«ãƒ†ã‚´ãƒª   | ä¾‹                                       | æ³•ä»¤       |
| ---------- | ---------------------------------------- | ---------- |
| æ²»ç™‚è¡¨ç¾   | æ²»ã‚‹ã€æ²»ã™ã€æ²»ç™‚ã€æ²»ç™’ã€å®Œæ²»             | è–¬æ©Ÿæ³•     |
| äºˆé˜²è¡¨ç¾   | äºˆé˜²ã™ã‚‹ã€é˜²ãã€é˜²æ­¢ã™ã‚‹                 | è–¬æ©Ÿæ³•     |
| ç–¾ç—…æ²»ç™‚   | ãŒã‚“ã«åŠ¹ãã€ç³–å°¿ç—…ã‚’æ²»ã™ã€é«˜è¡€åœ§ã‚’ä¸‹ã’ã‚‹ | è–¬æ©Ÿæ³•     |
| æœ€ä¸Šç´šè¡¨ç¾ | æœ€é«˜ç´šã€æ¥­ç•ŒNo.1ã€æ—¥æœ¬ä¸€ã€ä¸–ç•Œä¸€         | æ™¯å“è¡¨ç¤ºæ³• |
| æ–­å®šè¡¨ç¾   | çµ¶å¯¾ã«ã€100%åŠ¹æœã€å¿…ãšåŠ¹ã               | æ™¯å“è¡¨ç¤ºæ³• |

### Warningï¼ˆè­¦å‘Šï¼‰

| ã‚«ãƒ†ã‚´ãƒª | ä¾‹                                     | æ³•ä»¤       |
| -------- | -------------------------------------- | ---------- |
| åŠ¹æœæ–­å®š | åŠ¹ãã€åŠ¹æœãŒã‚ã‚‹ã€æ”¹å–„ã™ã‚‹             | è–¬æ©Ÿæ³•     |
| èº«ä½“å¢—å¼· | è‹¥è¿”ã‚‹ã€å›å¾©ã™ã‚‹ã€å†ç”Ÿã™ã‚‹ã€å¼·åŒ–ã•ã‚Œã‚‹ | è–¬æ©Ÿæ³•     |
| èª‡å¤§è¡¨ç¾ | é©šç•°çš„ãªã€åœ§å€’çš„ãªã€å¥‡è·¡ã®ã€å³åŠ¹æ€§     | æ™¯å“è¡¨ç¤ºæ³• |

### OKè¡¨ç¾ï¼ˆæ¨å¥¨ï¼‰

- ã€œã‚’ã‚µãƒãƒ¼ãƒˆ
- ã€œã«å½¹ç«‹ã¤å¯èƒ½æ€§
- ç ”ç©¶ã§ã¯
- ã€œã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™
- å¥åº·ç¶­æŒã«
- æ „é¤Šè£œçµ¦ã¨ã—ã¦
- ã€œãŒå ±å‘Šã•ã‚Œã¦ã„ã¾ã™

## å‡ºåŠ›ä¾‹

### ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Compliance Checker Report                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Scanned Files: 12                                       â”‚
â”‚ Total Violations: 3                                     â”‚
â”‚   - Critical: 1                                         â”‚
â”‚   - Warning: 2                                          â”‚
â”‚ Status: FAIL âŒ                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“‹ Violations:

ğŸš¨ Critical (1ä»¶)

[1] vitamin-c-article.json:45:12
   âŒ "ãŒã‚“ã‚’äºˆé˜²ã™ã‚‹"
   æ³•ä»¤: è–¬æ©Ÿæ³• | ã‚«ãƒ†ã‚´ãƒª: äºˆé˜²è¡¨ç¾
   ğŸ’¡ ä¿®æ­£ææ¡ˆ: å¥åº·ç¶­æŒã«å½¹ç«‹ã¤å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
   æ–‡è„ˆ: ...ãƒ“ã‚¿ãƒŸãƒ³Cã¯ãŒã‚“ã‚’äºˆé˜²ã™ã‚‹åŠ¹æœãŒ...

âš ï¸  Warning (2ä»¶)

[1] apps/web/src/components/ProductCard.tsx:23:15
   âš ï¸  "åŠ¹æœãŒã‚ã‚‹"
   æ³•ä»¤: è–¬æ©Ÿæ³• | ã‚«ãƒ†ã‚´ãƒª: åŠ¹æœæ–­å®š
   ğŸ’¡ ä¿®æ­£ææ¡ˆ: ç ”ç©¶ã§å ±å‘Šã•ã‚Œã¦ã„ã¾ã™
   æ–‡è„ˆ: ...ã“ã®ã‚µãƒ—ãƒªã¯åŠ¹æœãŒã‚ã‚‹ã¨...
```

## CI/CDé€£æº

### GitHub Actions

```yaml
name: Compliance Check

on: [push, pull_request]

jobs:
  compliance:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: "18"
      - run: npm install
      - name: Run Compliance Checker
        run: |
          npx tsx .claude/skills/compliance-checker/index.ts \
            --target "apps/web/src/**/*.tsx" \
            --severity critical \
            --format json \
            --save compliance-report.json
      - name: Upload Report
        uses: actions/upload-artifact@v3
        with:
          name: compliance-report
          path: compliance-report.json
```

## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### NGãƒ¯ãƒ¼ãƒ‰ã®è¿½åŠ 

[`.claude/skills/compliance-checker/rules/ng-words.ts`](./rules/ng-words.ts)ã‚’ç·¨é›†ã—ã¦NGãƒ¯ãƒ¼ãƒ‰ã‚’è¿½åŠ ã§ãã¾ã™ã€‚

```typescript
{
  word: 'ã‚«ã‚¹ã‚¿ãƒ NGãƒ¯ãƒ¼ãƒ‰',
  severity: 'critical',
  score: -10,
  category: 'ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ†ã‚´ãƒª',
  law: 'è–¬æ©Ÿæ³•',
  context: 'é•åç†ç”±ã®èª¬æ˜'
}
```

### ä¿®æ­£ææ¡ˆã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

`generateSuggestion`é–¢æ•°ã§NGãƒ¯ãƒ¼ãƒ‰ã”ã¨ã®ä¿®æ­£ææ¡ˆã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ã€‚

```typescript
const suggestions: Record<string, string> = {
  ã‚«ã‚¹ã‚¿ãƒ NGãƒ¯ãƒ¼ãƒ‰: "æ¨å¥¨ã•ã‚Œã‚‹ä»£æ›¿è¡¨ç¾",
  // ...
};
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Q: glob ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒå‹•ä½œã—ãªã„

A: ã‚·ã‚§ãƒ«ã«ã‚ˆã£ã¦ã¯globãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å±•é–‹ã—ã¦ã—ã¾ã†ãŸã‚ã€ã‚¯ã‚©ãƒ¼ãƒˆã§å›²ã‚“ã§ãã ã•ã„ã€‚

```bash
# âŒ NG
npx tsx .claude/skills/compliance-checker/index.ts --target apps/web/src/**/*.tsx

# âœ… OK
npx tsx .claude/skills/compliance-checker/index.ts --target "apps/web/src/**/*.tsx"
```

### Q: node_modulesãŒã‚¹ã‚­ãƒ£ãƒ³ã•ã‚Œã¦ã—ã¾ã†

A: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§é™¤å¤–ã•ã‚Œã¦ã„ã¾ã™ãŒã€æ˜ç¤ºçš„ã«é™¤å¤–ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

```bash
npx tsx .claude/skills/compliance-checker/index.ts \
  --target "**/*.tsx" \
  --exclude "**/node_modules/**,**/.next/**"
```

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ä½œæˆè€…

Ryota - Suptia Project
